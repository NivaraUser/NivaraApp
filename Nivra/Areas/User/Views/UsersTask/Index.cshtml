@model List<Nivara.Models.UsersTaskModel>

@{
    ViewBag.Title = "Users Task";
    Layout = "~/Areas/User/Views/Shared/_Layout.cshtml";
}
<style>

    .red {
        color: red;
    }
</style>
<div class="container-fluid">

    <!-- start page title -->
    <div class="row">
        <div class="col-12">
            <div class="page-title-box">
                <div class="page-title-right">
                    <ol class="breadcrumb m-0">
                        <li class="breadcrumb-item"><a href="javascript: void(0);">Hyper</a></li>
                        <li class="breadcrumb-item"><a href="javascript: void(0);">Apps</a></li>
                        <li class="breadcrumb-item active">Projects</li>
                    </ol>
                </div>
                <h4 class="page-title">Projects</h4>
            </div>
        </div>
    </div>
    <!-- end page title -->

    <div class="row mb-2">
        <div class="col-sm-4">
            <a href="@Url.ActionLink("Manage", "UsersTask")" class="btn btn-danger btn-rounded mb-3"><i class="mdi mdi-plus"></i> Create Task</a>
        </div>
        <div class="col-sm-8">
            <div class="text-sm-end" style="float:right">
                <div class="btn-group mb-3">
                    <button type="button" class="btn btn-primary">All</button>
                </div>
                <div class="btn-group mb-3 ms-1">
                    <button type="button" class="btn btn-light">Ongoing</button>
                    <button type="button" class="btn btn-light">Finished</button>
                </div>
                <div class="btn-group mb-3 ms-2 d-none d-sm-inline-block">
                    <button type="button" class="btn btn-secondary"><i class="dripicons-view-apps"></i></button>
                </div>
                <div class="btn-group mb-3 d-none d-sm-inline-block">
                    <button type="button" class="btn btn-link text-muted"><i class="dripicons-checklist"></i></button>
                </div>
            </div>
        </div><!-- end col-->
    </div>
    <!-- end row-->

    <div class="row">
        @foreach (var item in Model)
        {
            @if (item.IsDeleted == true)
            {
                <div class="col-lg-3 col-xxl-3">
                    <!-- project card -->
                    <div class="card d-block" style="background-color: #fa08082e; color: black; height: 400px ">
                        <div class="card-body">
                            <div class="dropdown card-widgets">
                                <a href="#" class="dropdown-toggle arrow-none" data-bs-toggle="dropdown" aria-expanded="true">
                                    <i class="dripicons-dots-3"></i>
                                </a>
                                <div class="dropdown-menu dropdown-menu-end">
                                    <!-- item-->

                                    <a href="@Url.Action("Manage", "UsersTask", new { @id = "" + item.Id + "" })" class="dropdown-item"><i class="mdi mdi-pencil me-1"></i>Edit</a>

                                    @*<a href="#" onclick="DeleteUsersTask(@item.Id)" class="dropdown-item"><i class="mdi mdi-delete me-1"></i>Delete</a>*@
                                  
                                </div>
                            </div>
                            <!-- project title-->

                            <h4 class="mt-0">
                                <a href="apps-projects-details.html" class="text-title">@item.ProjectName</a>
                            </h4>
                            <div class="badge bg-success mb-3">Finished</div>

                            <p class="text-muted font-13 mb-3" style="height:40px">
                                @item.ProjectDescription<a href="javascript:void(0);" class="fw-bold text-muted">view more</a>
                            </p>
                            <p class="text-muted font-13 mb-3" style="height:20px">
                                @foreach (var doc in @item.UsersTaskDocuments)
                                {

                                    <a href="~/Documents/@doc.DocumentName" target="_blank">@doc.DocumentName</a>
                                }
                            </p>

                            <!-- project detail-->
                            <p class="mb-1">
                                <span class="pe-2 text-nowrap mb-2 d-inline-block">
                                    <i class="mdi mdi-format-list-bulleted-type text-muted"></i>
                                    <b>21</b> Tasks
                                </span>
                                <span class="text-nowrap mb-2 d-inline-block">
                                    <i class="mdi mdi-comment-multiple-outline text-muted"></i>
                                    <b>741</b> Comments
                                </span>
                            </p>
                            @*<div id="tooltip-container">
                <a href="javascript:void(0);" data-bs-container="#tooltip-container" data-bs-toggle="tooltip" data-bs-placement="top" title="Mat Helme" class="d-inline-block">
                    <img src="assets/images/users/avatar-6.jpg" class="rounded-circle avatar-xs" alt="friend">
                </a>

                <a href="javascript:void(0);" data-bs-container="#tooltip-container" data-bs-toggle="tooltip" data-bs-placement="top" title="Michael Zenaty" class="d-inline-block">
                    <img src="assets/images/users/avatar-7.jpg" class="rounded-circle avatar-xs" alt="friend">
                </a>

                <a href="javascript:void(0);" data-bs-container="#tooltip-container" data-bs-toggle="tooltip" data-bs-placement="top" title="James Anderson" class="d-inline-block">
                    <img src="assets/images/users/avatar-8.jpg" class="rounded-circle avatar-xs" alt="friend">
                </a>
                <a href="javascript:void(0);" class="d-inline-block text-muted fw-bold ms-2">
                    +7 more
                </a>
            </div>*@
                            <!-- end card-body-->
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item p-3">
                                    <!-- project progress-->
                                    <p class="mb-2 fw-bold">Progress <span class="float-end">100%</span></p>
                                    <div class="progress progress-sm">
                                        <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%;">
                                        </div><!-- /.progress-bar -->
                                    </div><!-- /.progress -->
                                </li>
                            </ul>

                        </div> <!-- end card-->
                    </div> <!-- end col -->

                </div>
            }
            else
            {
                <div class="col-lg-3 col-xxl-3">
                    <!-- project card -->
                    <div class="card d-block" style="height:400px">
                        <div class="card-body">
                            <div class="dropdown card-widgets">
                                <a href="#" class="dropdown-toggle arrow-none" data-bs-toggle="dropdown" aria-expanded="true">
                                    <i class="dripicons-dots-3"></i>
                                </a>
                                <div class="dropdown-menu dropdown-menu-end">
                                    <!-- item-->

                                    <a href="@Url.Action("Manage", "UsersTask", new { @id = "" + item.Id + "" })" class="dropdown-item"><i class="mdi mdi-pencil me-1"></i>Edit</a>

                                    <a href="#" onclick="DeleteUsersTask(@item.Id)" class="dropdown-item"><i class="mdi mdi-delete me-1"></i>Delete</a>
                                    <!-- item-->
                                  
                                </div>
                            </div>
                            <!-- project title-->

                            <h4 class="mt-0">
                                <a href="apps-projects-details.html" class="text-title">@item.ProjectName</a>
                            </h4>
                            <div class="badge bg-success mb-3">Finished</div>

                            <p class="text-muted font-13 mb-3" style="height:40px">
                                @item.ProjectDescription<a href="javascript:void(0);" class="fw-bold text-muted">view more</a>
                            </p>

                            <p class="text-muted font-13 mb-3" style="height:20px">
                                @foreach (var doc in @item.UsersTaskDocuments)
                                {

                                    <a href="~/Documents/@doc.DocumentName" target="_blank">@doc.DocumentName</a>
                                }
                            </p>
                            <!-- project detail-->
                            <p class="mb-1">
                                <span class="pe-2 text-nowrap mb-2 d-inline-block">
                                    <i class="mdi mdi-format-list-bulleted-type text-muted"></i>
                                    <b>21</b> Tasks
                                </span>
                                <span class="text-nowrap mb-2 d-inline-block">
                                    <i class="mdi mdi-comment-multiple-outline text-muted"></i>
                                    <b>741</b> Comments
                                </span>
                            </p>
                            @*<div id="tooltip-container">
                <a href="javascript:void(0);" data-bs-container="#tooltip-container" data-bs-toggle="tooltip" data-bs-placement="top" title="Mat Helme" class="d-inline-block">
                    <img src="assets/images/users/avatar-6.jpg" class="rounded-circle avatar-xs" alt="friend">
                </a>

                <a href="javascript:void(0);" data-bs-container="#tooltip-container" data-bs-toggle="tooltip" data-bs-placement="top" title="Michael Zenaty" class="d-inline-block">
                    <img src="assets/images/users/avatar-7.jpg" class="rounded-circle avatar-xs" alt="friend">
                </a>

                <a href="javascript:void(0);" data-bs-container="#tooltip-container" data-bs-toggle="tooltip" data-bs-placement="top" title="James Anderson" class="d-inline-block">
                    <img src="assets/images/users/avatar-8.jpg" class="rounded-circle avatar-xs" alt="friend">
                </a>
                <a href="javascript:void(0);" class="d-inline-block text-muted fw-bold ms-2">
                    +7 more
                </a>
            </div>*@
                            <!-- end card-body-->
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item p-3">
                                    <!-- project progress-->
                                    <p class="mb-2 fw-bold">Progress <span class="float-end">100%</span></p>
                                    <div class="progress progress-sm">
                                        <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%;">
                                        </div><!-- /.progress-bar -->
                                    </div><!-- /.progress -->
                                </li>
                            </ul>

                        </div> <!-- end card-->
                    </div> <!-- end col -->

                </div>
            }
            <!-- end row-->
            <!-- end row-->
        }
    </div>
</div>
<script src="~/js/jquery.min.js"></script>

<script type="text/javascript">

 function DeleteUsersTask(id) {
        swal({
            title: "Are you sure?",
            text: "Once deleted, you will not be able to recover this  record!",
            icon: "warning",
            buttons: true,
            dangerMode: true,
        })
            .then((willDelete) => {
                if (willDelete) {
                    $(".nivaraLoader").show();
                    $.ajax({
                        url: '@Url.Action("DeleteUsersTask", "UsersTask")',
                        data: { id: id },
                        datatype: "json",
                        type: "get",
                        contenttype: 'application/json',
                        async: true,
                        success: function (data) {
                            $(".nivaraLoader").hide();
                            if (data.result)
                                window.location = data.url;
                            else
                                swal("Something went wrong!");
                        },
                        error: function (res) {
                            $(".nivaraLoader").hide();
                            swal("Something went wrong!");
                        }
                    });

                }
                //else {
                //    swal("Your imaginary file is safe!");
                //}
            });
    }

</script>




